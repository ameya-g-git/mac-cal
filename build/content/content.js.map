{"version":3,"file":"content/content.js","mappings":"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","sources":["webpack://mac-cal/./src/content/ics.js","webpack://mac-cal/webpack/bootstrap","webpack://mac-cal/webpack/runtime/amd options","webpack://mac-cal/webpack/runtime/define property getters","webpack://mac-cal/webpack/runtime/harmony module decorator","webpack://mac-cal/webpack/runtime/hasOwnProperty shorthand","webpack://mac-cal/./src/content/generate_ics.js","webpack://mac-cal/./src/content/parse_mytimetable.js","webpack://mac-cal/./src/content/date_utils/generate_fall_dates.js","webpack://mac-cal/./src/content/date_utils/calc_fall_recess.js","webpack://mac-cal/./src/content/date_utils/generate_springsummer_dates.js","webpack://mac-cal/./src/content/date_utils/calc_vic_day.js","webpack://mac-cal/./src/content/date_utils/calc_civic_holiday.js","webpack://mac-cal/./src/content/date_utils/generate_winter_dates.js","webpack://mac-cal/./src/content/date_utils/calc_winter_recess.js","webpack://mac-cal/./src/content/date_utils/calc_good_friday.js","webpack://mac-cal/./src/content/content.js"],"sourcesContent":["/* global saveAs, Blob, BlobBuilder, console */\n/* exported ics */\n\n/*! ics.js Wed Aug 20 2014 17:23:02 */\n\n// MARK: saveAs()\nvar saveAs =\n  saveAs ||\n  (function (e) {\n    \"use strict\";\n    if (\n      typeof e === \"undefined\" ||\n      (typeof navigator !== \"undefined\" &&\n        /MSIE [1-9]\\./.test(navigator.userAgent))\n    ) {\n      return;\n    }\n    var t = e.document,\n      n = function () {\n        return e.URL || e.webkitURL || e;\n      },\n      r = t.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\"),\n      o = \"download\" in r,\n      a = function (e) {\n        var t = new MouseEvent(\"click\");\n        e.dispatchEvent(t);\n      },\n      i = /constructor/i.test(e.HTMLElement) || e.safari,\n      f = /CriOS\\/[\\d]+/.test(navigator.userAgent),\n      u = function (t) {\n        (e.setImmediate || e.setTimeout)(function () {\n          throw t;\n        }, 0);\n      },\n      s = \"application/octet-stream\",\n      d = 1e3 * 40,\n      c = function (e) {\n        var t = function () {\n          if (typeof e === \"string\") {\n            n().revokeObjectURL(e);\n          } else {\n            e.remove();\n          }\n        };\n        setTimeout(t, d);\n      },\n      l = function (e, t, n) {\n        t = [].concat(t);\n        var r = t.length;\n        while (r--) {\n          var o = e[\"on\" + t[r]];\n          if (typeof o === \"function\") {\n            try {\n              o.call(e, n || e);\n            } catch (a) {\n              u(a);\n            }\n          }\n        }\n      },\n      p = function (e) {\n        if (\n          /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(\n            e.type,\n          )\n        ) {\n          return new Blob([String.fromCharCode(65279), e], {\n            type: e.type,\n          });\n        }\n        return e;\n      },\n      v = function (t, u, d) {\n        if (!d) {\n          t = p(t);\n        }\n        var v = this,\n          w = t.type,\n          m = w === s,\n          y,\n          h = function () {\n            l(v, \"writestart progress write writeend\".split(\" \"));\n          },\n          S = function () {\n            if ((f || (m && i)) && e.FileReader) {\n              var r = new FileReader();\n              r.onloadend = function () {\n                var t = f\n                  ? r.result\n                  : r.result.replace(/^data:[^;]*;/, \"data:attachment/file;\");\n                var n = e.open(t, \"_blank\");\n                if (!n) e.location.href = t;\n                t = undefined;\n                v.readyState = v.DONE;\n                h();\n              };\n              r.readAsDataURL(t);\n              v.readyState = v.INIT;\n              return;\n            }\n            if (!y) {\n              y = n().createObjectURL(t);\n            }\n            if (m) {\n              e.location.href = y;\n            } else {\n              var o = e.open(y, \"_blank\");\n              if (!o) {\n                e.location.href = y;\n              }\n            }\n            v.readyState = v.DONE;\n            h();\n            c(y);\n          };\n        v.readyState = v.INIT;\n        if (o) {\n          y = n().createObjectURL(t);\n          setTimeout(function () {\n            r.href = y;\n            r.download = u;\n            a(r);\n            h();\n            c(y);\n            v.readyState = v.DONE;\n          });\n          return;\n        }\n        S();\n      },\n      w = v.prototype,\n      m = function (e, t, n) {\n        return new v(e, t || e.name || \"download\", n);\n      };\n    if (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob) {\n      return function (e, t, n) {\n        t = t || e.name || \"download\";\n        if (!n) {\n          e = p(e);\n        }\n        return navigator.msSaveOrOpenBlob(e, t);\n      };\n    }\n    w.abort = function () {};\n    w.readyState = w.INIT = 0;\n    w.WRITING = 1;\n    w.DONE = 2;\n    w.error =\n      w.onwritestart =\n      w.onprogress =\n      w.onwrite =\n      w.onabort =\n      w.onerror =\n      w.onwriteend =\n        null;\n    return m;\n  })(\n    (typeof self !== \"undefined\" && self) ||\n      (typeof window !== \"undefined\" && window) ||\n      this.content,\n  );\nif (typeof module !== \"undefined\" && module.exports) {\n  module.exports.saveAs = saveAs;\n} else if (\n  typeof define !== \"undefined\" &&\n  define !== null &&\n  define.amd !== null\n) {\n  define(\"FileSaver.js\", function () {\n    return saveAs;\n  });\n}\n\n// MARK: ics(uidDomain, prodId)\nexport let ics = function (uidDomain, prodId) {\n  \"use strict\";\n\n  if (\n    navigator.userAgent.indexOf(\"MSIE\") > -1 &&\n    navigator.userAgent.indexOf(\"MSIE 10\") == -1\n  ) {\n    console.log(\"Unsupported Browser\");\n    return;\n  }\n\n  if (typeof uidDomain === \"undefined\") {\n    uidDomain = \"default\";\n  }\n  if (typeof prodId === \"undefined\") {\n    prodId = \"Calendar\";\n  }\n\n  var SEPARATOR = navigator.appVersion.indexOf(\"Win\") !== -1 ? \"\\r\\n\" : \"\\n\";\n  var calendarEvents = [];\n  var calendarStart = [\n    \"BEGIN:VCALENDAR\",\n    \"PRODID:\" + prodId,\n    \"VERSION:2.0\",\n  ].join(SEPARATOR);\n  var calendarEnd = SEPARATOR + \"END:VCALENDAR\";\n  var BYDAY_VALUES = [\"SU\", \"MO\", \"TU\", \"WE\", \"TH\", \"FR\", \"SA\"];\n\n  return {\n    /**\n     * Returns events array\n     * @return {array} Events\n     */\n    events: function () {\n      return calendarEvents;\n    },\n\n    /**\n     * Returns calendar\n     * @return {string} Calendar in iCalendar format\n     */\n    calendar: function () {\n      return (\n        calendarStart + SEPARATOR + calendarEvents.join(SEPARATOR) + calendarEnd\n      );\n    },\n\n    /**\n     * Add event to the calendar\n     * @param  {string} subject     Subject/Title of event\n     * @param  {string} description Description of event\n     * @param  {string} location    Location of event\n     * @param  {string} begin       Beginning date of event\n     * @param  {string} stop        Ending date of event\n     */\n    addEvent: function (subject, description, location, begin, stop, rrule) {\n      // I'm not in the mood to make these optional... So they are all required\n      if (\n        typeof subject === \"undefined\" ||\n        typeof description === \"undefined\" ||\n        typeof location === \"undefined\" ||\n        typeof begin === \"undefined\" ||\n        typeof stop === \"undefined\"\n      ) {\n        return false;\n      }\n\n      // validate rrule\n      if (rrule) {\n        if (!rrule.rrule) {\n          if (\n            rrule.freq !== \"YEARLY\" &&\n            rrule.freq !== \"MONTHLY\" &&\n            rrule.freq !== \"WEEKLY\" &&\n            rrule.freq !== \"DAILY\"\n          ) {\n            throw \"Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'\";\n          }\n\n          if (rrule.until) {\n            if (isNaN(Date.parse(rrule.until))) {\n              throw \"Recurrence rrule 'until' must be a valid date string\";\n            }\n          }\n\n          if (rrule.interval) {\n            if (isNaN(parseInt(rrule.interval))) {\n              throw \"Recurrence rrule 'interval' must be an integer\";\n            }\n          }\n\n          if (rrule.count) {\n            if (isNaN(parseInt(rrule.count))) {\n              throw \"Recurrence rrule 'count' must be an integer\";\n            }\n          }\n\n          if (typeof rrule.byday !== \"undefined\") {\n            if (\n              Object.prototype.toString.call(rrule.byday) !== \"[object Array]\"\n            ) {\n              throw \"Recurrence rrule 'byday' must be an array\";\n            }\n\n            if (rrule.byday.length > 7) {\n              throw \"Recurrence rrule 'byday' array must not be longer than the 7 days in a week\";\n            }\n\n            // Filter any possible repeats\n            rrule.byday = rrule.byday.filter(function (elem, pos) {\n              return rrule.byday.indexOf(elem) == pos;\n            });\n\n            for (var d in rrule.byday) {\n              if (BYDAY_VALUES.indexOf(rrule.byday[d]) < 0) {\n                throw \"Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'\";\n              }\n            }\n          }\n        }\n      }\n\n      //TODO add time and time zone? use moment to format?\n      var start_date = new Date(begin);\n      var end_date = new Date(stop);\n      var now_date = new Date();\n\n      var start_year = (\"0000\" + start_date.getFullYear().toString()).slice(-4);\n      var start_month = (\"00\" + (start_date.getMonth() + 1).toString()).slice(\n        -2,\n      );\n      var start_day = (\"00\" + start_date.getDate().toString()).slice(-2);\n      var start_hours = (\"00\" + start_date.getHours().toString()).slice(-2);\n      var start_minutes = (\"00\" + start_date.getMinutes().toString()).slice(-2);\n      var start_seconds = (\"00\" + start_date.getSeconds().toString()).slice(-2);\n\n      var end_year = (\"0000\" + end_date.getFullYear().toString()).slice(-4);\n      var end_month = (\"00\" + (end_date.getMonth() + 1).toString()).slice(-2);\n      var end_day = (\"00\" + end_date.getDate().toString()).slice(-2);\n      var end_hours = (\"00\" + end_date.getHours().toString()).slice(-2);\n      var end_minutes = (\"00\" + end_date.getMinutes().toString()).slice(-2);\n      var end_seconds = (\"00\" + end_date.getSeconds().toString()).slice(-2);\n\n      var now_year = (\"0000\" + now_date.getFullYear().toString()).slice(-4);\n      var now_month = (\"00\" + (now_date.getMonth() + 1).toString()).slice(-2);\n      var now_day = (\"00\" + now_date.getDate().toString()).slice(-2);\n      var now_hours = (\"00\" + now_date.getHours().toString()).slice(-2);\n      var now_minutes = (\"00\" + now_date.getMinutes().toString()).slice(-2);\n      var now_seconds = (\"00\" + now_date.getSeconds().toString()).slice(-2);\n\n      // Since some calendars don't add 0 second events, we need to remove time if there is none...\n      var start_time = \"\";\n      var end_time = \"\";\n      if (\n        start_hours +\n          start_minutes +\n          start_seconds +\n          end_hours +\n          end_minutes +\n          end_seconds !=\n        0\n      ) {\n        start_time = \"T\" + start_hours + start_minutes + start_seconds;\n        end_time = \"T\" + end_hours + end_minutes + end_seconds;\n      }\n      var now_time = \"T\" + now_hours + now_minutes + now_seconds;\n\n      var start = start_year + start_month + start_day + start_time;\n      var end = end_year + end_month + end_day + end_time;\n      var now = now_year + now_month + now_day + now_time;\n\n      // recurrence rrule vars\n      var rruleString;\n      if (rrule) {\n        if (rrule.rrule) {\n          rruleString = rrule.rrule;\n        } else {\n          rruleString = \"RRULE:FREQ=\" + rrule.freq;\n\n          if (rrule.until) {\n            var uDate = new Date(Date.parse(rrule.until)).toISOString();\n            rruleString +=\n              \";UNTIL=\" +\n              uDate.substring(0, uDate.length - 13).replace(/[-]/g, \"\") +\n              \"000000Z\";\n          }\n\n          if (rrule.interval) {\n            rruleString += \";INTERVAL=\" + rrule.interval;\n          }\n\n          if (rrule.count) {\n            rruleString += \";COUNT=\" + rrule.count;\n          }\n\n          if (rrule.byday && rrule.byday.length > 0) {\n            rruleString += \";BYDAY=\" + rrule.byday.join(\",\");\n          }\n        }\n      }\n\n      var stamp = new Date().toISOString();\n\n      var calendarEvent = [\n        \"BEGIN:VEVENT\",\n        \"UID:\" + calendarEvents.length + \"@\" + uidDomain,\n        \"CLASS:PUBLIC\",\n        \"DESCRIPTION:\" + description,\n        \"DTSTAMP;VALUE=DATE-TIME:\" + now,\n        \"DTSTART;VALUE=DATE-TIME:\" + start,\n        \"DTEND;VALUE=DATE-TIME:\" + end,\n        \"LOCATION:\" + location,\n        \"SUMMARY;LANGUAGE=en-us:\" + subject,\n        \"TRANSP:TRANSPARENT\",\n        \"END:VEVENT\",\n      ];\n\n      if (rruleString) {\n        calendarEvent.splice(4, 0, rruleString);\n      }\n\n      calendarEvent = calendarEvent.join(SEPARATOR);\n\n      calendarEvents.push(calendarEvent);\n      return calendarEvent;\n    },\n\n    /**\n     * Download calendar using the saveAs function from filesave.js\n     * @param  {string} filename Filename\n     * @param  {string} ext      Extention\n     */\n    download: function (filename, ext) {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      ext = typeof ext !== \"undefined\" ? ext : \".ics\";\n      filename = typeof filename !== \"undefined\" ? filename : \"calendar\";\n      var calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      var blob;\n      if (navigator.userAgent.indexOf(\"MSIE 10\") === -1) {\n        // chrome or firefox\n        blob = new Blob([calendar]);\n      } else {\n        // ie\n        var bb = new BlobBuilder();\n        bb.append(calendar);\n        blob = bb.getBlob(\"text/x-vCalendar;charset=\" + document.characterSet);\n      }\n      saveAs(blob, filename + ext);\n      return calendar;\n    },\n\n    /**\n     * Build and return the ical contents\n     */\n    build: function () {\n      if (calendarEvents.length < 1) {\n        return false;\n      }\n\n      var calendar =\n        calendarStart +\n        SEPARATOR +\n        calendarEvents.join(SEPARATOR) +\n        calendarEnd;\n\n      return calendar;\n    },\n  };\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdO = {};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import parse from \"./parse_mytimetable.js\";\nimport { ics } from \"./ics.js\";\nimport getFallDates from \"./date_utils/generate_fall_dates.js\";\nimport getSpringSummerDates from \"./date_utils/generate_springsummer_dates.js\";\nimport getWinterDates from \"./date_utils/generate_winter_dates.js\";\n\nfunction getDayDelta(date, day) {\n  const weekday = date.getDay();\n  let dayOffset = 0;\n\n  switch (day) {\n    case \"MO\":\n      dayOffset = 1;\n      break;\n    case \"TU\":\n      dayOffset = 2;\n      break;\n    case \"WE\":\n      dayOffset = 3;\n      break;\n    case \"TH\":\n      dayOffset = 4;\n      break;\n    case \"FR\":\n      dayOffset = 5;\n      break;\n    case \"SA\":\n      dayOffset = 6;\n      break;\n    default:\n      break;\n  }\n\n  return dayOffset - weekday;\n}\n\nfunction calcNewStartDate(begin, days) {\n  let dayDelta = -1;\n\n  // determine the delta between when the course starts, and when the actual first class is\n  // goes through every weekday in days, in case first class falls Behind the course start date\n  for (let i = 0; i < days.length && dayDelta < 0; i++) {\n    dayDelta = getDayDelta(begin, days[i]);\n  }\n\n  // if every day in days results in a negative offset,\n  // just set the first class date to be the first repeated day in the following week\n  if (dayDelta < 0) {\n    dayDelta = 7 + getDayDelta(begin, days[0]);\n  }\n\n  return begin.getDate() + dayDelta;\n}\n\n// async function loadScript(src) {\n//     const parseSrc = await chrome.runtime.getURL(src);\n//     const parseScript = await import(parseSrc);\n//     return parseScript;\n// }\n\nfunction parseFormat(format, classData) {\n  let output = [];\n  let specCode = \"\";\n  let specifier = false; // whether or not we're currently parsing a specifier\n\n  const { name, classType, classSec, loc } = classData;\n\n  for (const char of format) {\n    specifier ? (specCode += char) : output.push(char);\n    if (char === \"{\") {\n      output.pop();\n      if (output[output.length - 1] === \"\\\\\") {\n        output.pop();\n        output.push(\"{\");\n        continue;\n      }\n      specifier = true;\n    }\n\n    if (char === \"}\") {\n      specifier = false;\n      specCode = specCode.slice(0, -1);\n\n      if (!specCode) continue;\n\n      switch (specCode) {\n        case \"code\":\n          output.push(name);\n          break;\n        case \"type\":\n          output.push(classType);\n          break;\n        case \"sec\":\n          output.push(classSec);\n          break;\n        case \"room\":\n          output.push(loc);\n          break;\n        default:\n          output.push(`{${specCode}}`);\n      }\n      specCode = \"\";\n    }\n  }\n\n  if (specifier) throw new SyntaxError(\"Curly brace not closed.\");\n\n  const outputStr = output.join(\"\");\n\n  return outputStr;\n}\n\nexport function generateICS(nameFormat, includeLoc) {\n  // * parse mytimetable\n  const data = parse();\n\n  // * create ics instance\n  const { sem, classes } = data;\n  const [year, season] = sem.split(\" \");\n\n  const uid = `maccal${sem.replace(\" \", \"\")}`;\n  const cal = ics(uid);\n  // * calculate sessional dates\n\n  let d;\n\n  if (season.includes(\"fall\")) {\n    d = getFallDates(Number(year));\n  } else if (season.includes(\"summer\")) {\n    d = getSpringSummerDates(Number(year));\n  } else if (season.includes(\"winter\")) {\n    d = getWinterDates(Number(year));\n  } else {\n    // TODO: throw error\n  }\n\n  // * generate ics\n\n  for (const cls of classes) {\n    /* \n        example of the data stored in a single `cls`, for ease of development\n        {\n            \"begin\": \"2025-05-05T04:00:00.000Z\",\n            \"end\": \"2025-06-13T04:00:00.000Z\",\n            \"name\": \"MEDIAART 1A03\",\n            \"classType\": \"LEC\",\n            \"classSec\": \"C01\",\n            \"prof\": \"Jessica Rodriguez Cabrera\",\n            \"loc\": \"LRW 1055\",\n            \"freq\": {\n                \"days\": [\"TU\", \"TH\"],\n                \"startTime\": \"1:00 PM\",\n                \"endTime\": \"4:00 PM\"\n            }\n        }\n    */\n    const { begin, end, name, classType, classSec, prof, loc, freq } = cls;\n\n    begin.setDate(begin.getDate() - 1); // subtract 1 day so that school begins after every date in `dates`\n    end.setDate(end.getDate() + 1); // calendar event excludes the last day, so just add one to account for that\n\n    const dates = [...d];\n\n    dates.push(begin);\n    dates.push(end);\n\n    dates.sort((d1, d2) => d1.getTime() - d2.getTime());\n\n    // remove dates before the actual class start date\n    dates.splice(\n      0,\n      dates.findIndex((d) => d.getTime() === begin.getTime()),\n    );\n\n    for (let i = 0; i < dates.length - 1; i++) {\n      const secBegin = new Date(dates[i]);\n      secBegin.setDate(secBegin.getDate() + 1); // class begins the day after a no school day\n\n      const secEnd = new Date(dates[i + 1]);\n\n      // if the date in question is just during a reading week, just skip to the next date\n      if (secBegin.getTime() === secEnd.getTime()) continue;\n\n      // once the date in question is the class end date, end the loop (only really applicable for spring/summer)\n      if (dates[i].getTime() === end.getTime()) break;\n\n      const { days, startTime, endTime } = freq;\n\n      // TODO: i need to work on the formatting language for calendar blocks, but for now i'll use my format\n      let eventName = `${name} - ${classType} ${classSec}`;\n      try {\n        eventName = parseFormat(nameFormat, {\n          name,\n          classType,\n          classSec,\n          loc,\n        });\n      } catch {\n        console.error(\"Error in event name. Reverting to default name format.\");\n        eventName = `${name} - ${classType} ${classSec}`;\n      }\n\n      let clsBegin = new Date(secBegin);\n      clsBegin.setDate(calcNewStartDate(clsBegin, days));\n\n      const rrule = {\n        freq: \"WEEKLY\",\n        byday: days,\n        until: secEnd,\n      };\n\n      cal.addEvent(\n        eventName,\n        \"\",\n        includeLoc ? loc : \"\",\n        `${clsBegin.toDateString()} ${startTime}`,\n        `${clsBegin.toDateString()} ${endTime}`,\n        rrule,\n      );\n    }\n  }\n\n  cal.download(\"maccal_\" + sem.replace(\" \", \"\"));\n}\n","export default function parse() {\n  const courseBoxes = document.querySelectorAll(\n    \"#legend_box>.course_box .course_cell_legend\",\n  );\n\n  function legendTimeToRecur(legTime, year) {\n    const [days, time] = legTime.split(\": \").map((t) => t.trim());\n    let begin, end;\n\n    const dayArray = days.split(\", \").map((d) => d.toUpperCase());\n\n    // only the case if begin + end is included\n    if (dayArray.length !== days.split(\" \").length) {\n      const lastElem = dayArray[dayArray.length - 1];\n\n      // if begin + end is included, lastElem looks something like 'THU MAY 5 - JUN 13'\n      // the string is sliced to separate the dayArray elem from the dates\n      const [elem, dates] = [lastElem.slice(0, 3), lastElem.slice(4)];\n      dayArray[dayArray.length - 1] = elem;\n\n      begin = new Date(`${dates.split(\" - \")[0]} ${year}`);\n      end = new Date(`${dates.split(\" - \")[1]} ${year}`);\n    }\n\n    const times = time.split(\" to \");\n\n    return {\n      freq: {\n        days: dayArray.map((d) => d.slice(0, 2)),\n        startTime: times[0],\n        endTime: times[1],\n      },\n      ...(begin && end && { begin, end }),\n    };\n  }\n\n  function parseRooms(roomElem) {\n    let rooms;\n\n    if (roomElem.querySelector(\".legend_multi_loc\")) {\n      rooms = Array.from(roomElem.querySelectorAll(\".legend_multi_loc\")).map(\n        (r) => r.textContent.split(\" - \")[1].replace(\"_\", \" \"),\n      );\n    } else {\n      rooms = [roomElem.textContent.split(\" - \")[1].replace(\"_\", \" \")];\n    }\n\n    return rooms;\n  }\n\n  let data = {\n    sem: \"\",\n    classes: [],\n  };\n\n  for (const course of courseBoxes) {\n    const header = course.querySelector(\".header_cell\");\n    const courseTitle = header.querySelector(\".course_title\");\n\n    const [sem, dates] = courseTitle.nextElementSibling.textContent.split(\": \");\n\n    const [begin, end] = dates // course start and end dates in the format `Month D YY`\n      .split(\" - \")\n      .map((d) => new Date(`${d} ${sem.split(\" \")[0]}`));\n\n    data.sem = sem.toLowerCase().replace(\"/\", \"\");\n\n    // array of the classes + sections being enrolled in, in order\n    const selectedClasses = course.querySelector(\n      \".inner_legend_table:has(.is-checked)\",\n    );\n\n    // goes in the order of LEC, LAB, TUT\n    const classOrder = Array.from(\n      selectedClasses.querySelectorAll(\"strong.type_block\"),\n    ).map((elem) => elem.textContent);\n\n    const roomOrder = Array.from(\n      selectedClasses.querySelectorAll(\".location_block\"),\n    ).map((elem) => parseRooms(elem));\n\n    const profOrder = Array.from(\n      selectedClasses.querySelectorAll(\"[title*='Instructor']\"),\n    ).map((elem) => elem.textContent);\n\n    // im Assuming courses only have 1 TUT timing section Please : )\n    const classTimes = header\n      .querySelector(\"#hoursInLegend\") // evil how they use the same id per course\n      .innerHTML.split(\"<br>\")\n      .slice(0, -1);\n\n    // holds an array of class times, separated per class in a subarray\n    // yes this is annoying enough to have to be done in a separate variable\n    let classTimesOrder = [classTimes];\n\n    if (classOrder.length == 2) {\n      classTimesOrder = [\n        classTimes.length == 2 // LEC or LAB times can take up to 2 lines, this accounts for that\n          ? [classTimes[0]]\n          : classTimes.slice(0, 2),\n        [classTimes[classTimes.length - 1]],\n      ];\n    } else if (classOrder.length == 3) {\n      classTimesOrder = classTimes.map((cls) => [cls]);\n    }\n\n    classTimesOrder.forEach((times, i) => {\n      const [classType, classSec] = classOrder[i].split(\" \");\n      const [year, _] = data.sem.split(\" \");\n\n      times.forEach((t, ti) =>\n        data.classes.push({\n          begin,\n          end,\n          name: courseTitle.textContent,\n          classType,\n          classSec,\n          prof: profOrder[i],\n          loc: roomOrder[i][ti], // every time has a corresponding room\n          ...legendTimeToRecur(t, year),\n          // legendTimeToRecur returns an object of type { freq: { ... }, begin?: Date, end?: Date }\n        }),\n      );\n    });\n  }\n\n  return data;\n}\n","import getFallRecess from \"./calc_fall_recess.js\";\n\nexport default function getFallDates(year) {\n  const tar = new Date(year, 8, 30);\n\n  let dates = [];\n  dates.push(tar);\n  dates.push(...getFallRecess(year));\n\n  return dates;\n}\n","export default function getFallRecess(year) {\n  const o = new Date(2025, 9, 1);\n\n  const d = o.getDay() > 1 ? 8 - o.getDay() : 1 - o.getDay();\n\n  const t = new Date(year, 9, 1 + d + 7);\n\n  const r = [t];\n\n  for (let i = 1; i <= 6; i++) {\n    const tmp = new Date(t);\n    tmp.setDate(tmp.getDate() + i);\n    r.push(tmp);\n  }\n\n  return r;\n}\n","import getVictoriaDay from \"./calc_vic_day.js\";\nimport getCivicHoliday from \"./calc_civic_holiday.js\";\n\nexport default function getSpringSummerDates(year) {\n  let dates = [];\n  dates.push(getVictoriaDay(year));\n  dates.push(new Date(year, 6, 1));\n  dates.push(getCivicHoliday(year));\n\n  return dates;\n}\n","export default function getVictoriaDay(year) {\n  const i = new Date(year, 4, 18);\n\n  const d = i.getDay() > 1 ? 8 - i.getDay() : 1 - i.getDay();\n\n  const vd = new Date(year, 4, 18 + d);\n\n  return vd;\n}\n","export default function getCivicHoliday(year) {\n  const i = new Date(year, 7, 1);\n\n  const d = i.getDay() > 1 ? 8 - i.getDay() : 1 - i.getDay();\n\n  const ch = new Date(year, 7, 1 + d);\n\n  return ch;\n}\n","import getGoodFriday from \"./calc_good_friday.js\";\nimport getWinterRecess from \"./calc_winter_recess.js\";\n\nexport default function getWinterDates(year) {\n  const dates = getWinterRecess(year);\n  dates.push(getGoodFriday(year));\n\n  return dates;\n}\n","export default function getWinterRecess(year) {\n  const f = new Date(year, 1, 1);\n\n  const d = f.getDay() > 1 ? 8 - f.getDay() : 1 - f.getDay();\n\n  const fd = new Date(year, 1, 1 + d + 14);\n\n  const r = [fd];\n\n  for (let i = 1; i <= 6; i++) {\n    const tmp = new Date(fd);\n    tmp.setDate(tmp.getDate() + i);\n    r.push(tmp);\n  }\n\n  return r;\n}\n","export default function getGoodFriday(year) {\n  // find first full moon after mar 21\n  // then first sunday after : )\n  // then 2 days before that   :    )\n\n  const NM = new Date(2025, 5, 25, 6, 31); // known new moon date + time from https://www.timeanddate.com/moon/phases/\n  const VE = new Date(year, 2, 21);\n  const DAY = 24 * 60 * 60 * 1000;\n\n  const d = Math.abs(VE - NM) / DAY;\n\n  const c = (d / 29.53) % 1;\n\n  // days until next full moon\n  const nf = (c > 0.5 ? 1.5 - c : 0.5 - c) * 29.53;\n\n  const e = new Date(VE);\n  e.setDate(e.getDate() + nf); // set easter date (temp) to the first full moon after vernal equinox\n\n  const sun = e.getDay == 0 ? 0 : 7 - e.getDay();\n  e.setDate(e.getDate() + sun); // set easter date (final) to the first sunday after\n\n  const gf = new Date(e);\n\n  gf.setDate(gf.getDate() - 2); // good friday is just 2 days before easter :  )\n\n  return gf;\n}\n","import { generateICS } from \"./generate_ics.js\";\n\n(() => {\n  let script = \"\";\n  let cal;\n\n  if (window.location.href.match(/.*:\\/\\/mytimetable\\.mcmaster\\.ca.*/)) {\n    script = \"content_scripts/parse_mytimetable.js\";\n  } else {\n    // TODO: Idk throw an error or something\n  }\n\n  function handleMessage(request, sender, sendResponse) {\n    if (request.nameFormat) generateICS(request.nameFormat, request.includeLoc);\n    return true;\n  }\n\n  if (!chrome.runtime.onMessage.hasListener(handleMessage))\n    chrome.runtime.onMessage.addListener(handleMessage);\n})();\n"],"names":["saveAs","e","navigator","test","userAgent","t","document","n","URL","webkitURL","r","createElementNS","o","i","HTMLElement","safari","f","u","setImmediate","setTimeout","c","revokeObjectURL","remove","l","concat","length","call","a","p","type","Blob","String","fromCharCode","v","d","y","this","m","h","split","readyState","INIT","createObjectURL","href","download","MouseEvent","dispatchEvent","DONE","FileReader","onloadend","result","replace","open","location","undefined","readAsDataURL","S","w","prototype","msSaveOrOpenBlob","name","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","self","window","content","module","exports","define","ics","uidDomain","prodId","indexOf","SEPARATOR","appVersion","calendarEvents","calendarStart","join","calendarEnd","BYDAY_VALUES","events","calendar","addEvent","subject","description","begin","stop","rrule","freq","until","isNaN","Date","parse","interval","parseInt","count","byday","Object","toString","filter","elem","pos","start_date","end_date","now_date","start_year","getFullYear","slice","start_month","getMonth","start_day","getDate","start_hours","getHours","start_minutes","getMinutes","start_seconds","getSeconds","end_year","end_month","end_day","end_hours","end_minutes","end_seconds","start_time","end_time","rruleString","start","end","now","uDate","toISOString","substring","calendarEvent","splice","push","filename","ext","blob","bb","BlobBuilder","append","getBlob","characterSet","build","console","log","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","id","loaded","__webpack_modules__","amdO","definition","key","defineProperty","enumerable","get","hmd","create","children","set","Error","obj","prop","hasOwnProperty","getDayDelta","date","day","weekday","getDay","dayOffset","calcNewStartDate","days","dayDelta","parseFormat","format","classData","output","specCode","specifier","classType","classSec","loc","char","pop","SyntaxError","generateICS","nameFormat","includeLoc","data","courseBoxes","querySelectorAll","legendTimeToRecur","legTime","year","time","map","trim","dayArray","toUpperCase","lastElem","dates","times","startTime","endTime","parseRooms","roomElem","rooms","querySelector","Array","from","textContent","sem","classes","course","header","courseTitle","nextElementSibling","toLowerCase","selectedClasses","classOrder","roomOrder","profOrder","classTimes","innerHTML","classTimesOrder","cls","forEach","_","ti","prof","season","uid","cal","includes","tar","tmp","setDate","getFallRecess","getFallDates","Number","getVictoriaDay","getCivicHoliday","getSpringSummerDates","fd","getWinterRecess","NM","VE","Math","abs","nf","sun","gf","getGoodFriday","getWinterDates","sort","d1","d2","getTime","findIndex","secBegin","secEnd","eventName","clsBegin","toDateString","script","handleMessage","request","sender","sendResponse","match","chrome","runtime","onMessage","hasListener","addListener"],"sourceRoot":""}